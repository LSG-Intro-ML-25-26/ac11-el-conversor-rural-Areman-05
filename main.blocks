<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable type="KIND_SpriteKind" id="mKoJ,tcIdL|Y1%mlnj,u">Player</variable><variable type="KIND_SpriteKind" id="l-[Tms?B+8{n,v@qg7yN">Projectile</variable><variable type="KIND_SpriteKind" id="WJnT@i03Ti2yxVXVS{aW">Food</variable><variable type="KIND_SpriteKind" id=".[w4Hf`KPh/P^Y8Y.II}">Enemy</variable><variable id="LJVExrEnV9,};OV=;lt6">mercader</variable><variable id="fSEr}J=p+MO$Om7!p64F">KIND_NPC</variable><variable id="[@%B/Z0Z1r{7y:C(UBo2">nena</variable><variable id="6@?,+^{tmtd!a4j@04jC">KIND_TREE</variable><variable id="zzq6Nzw,f1TG;_H/^1~Q">arbre</variable><variable id="3u3%~@]hzLO^K.h/C2.6">col</variable><variable id="BrD}#d6s!KI.Bb2teY$y">row</variable><variable id="J{S0]7*=0$W/d,th;yms">sortir</variable><variable id="2,tBMPz0lqzfd/qPWGi3">tria</variable><variable id="`vqXc.GX$QP3}eU:3yuW">quantitat</variable><variable id="(Q{]e`I,8SH`2yj#T+(}">arbre2</variable><variable id="pQMyA3d.BAfZ=*F)FP}{">a</variable><variable id="RJql0#LkZ32(SS[(d+E%">prop_arbre</variable></variables><comment id="x(esH~mW^q4H%jG3bO}b" x="20" y="2870" w="280" h="120">
--- 3. VARIABLES GLOBALS ---
</comment><block type="pxt-on-start" id="lwMzhm(88DN1r_XP0$tM" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="+QiPJ#JsXKt4Wbr*DKJZ"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let KIND_SCENERY = SpriteKind.create()" numlines="1" declaredvars="KIND_SCENERY"></mutation><next><block type="typescript_statement" id="dbB+)zE5v^M(7QY*ylZt"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let KIND_TREE = SpriteKind.create()" numlines="1" declaredvars="KIND_TREE"></mutation><next><block type="typescript_statement" id="s)W]@5-tAg8(B!1}j%3f"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let KIND_NPC = SpriteKind.create()" numlines="1" declaredvars="KIND_NPC"></mutation><next><block type="typescript_statement" id="Ob_x6BctF[H-F8?Ir#_o"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class MercatRural {" line1="    // Atributs privats per a les taxes segons la taula de l'enunciat" line2="    private taxes: number[]" line3="    private noms: string[]" line4="    private es_animal: boolean[]" line5="" line6="    constructor() {" line7="        // Índexs segons taula: 0:Gallina, 1:Patata, 2:Cabra, 3:Ous, 4:Cavall" line8="        this.taxes = [6, 1.3333, 5, 0.25, 12]" line9="        this.noms = [&quot;Gallina&quot;, &quot;kg de Patates&quot;, &quot;Cabra&quot;, &quot;Ous frescos&quot;, &quot;Cavall&quot;]" line10="        this.es_animal = [true, false, true, false, true]" line11="    }" line12="" line13="    /**" line14="     * Mètode per processar la compra amb control d'errors (Smart Coding)." line15="     */" line16="    public processar_compra(index: number, q: number): void {" line17="        let nom = this.noms[index]" line18="        let taxa = this.taxes[index]" line19="        let animal = this.es_animal[index]" line20="" line21="        // --- GESTIÓ D'ERRORS (Casos &quot;veïns graciosos&quot;) ---" line22="        if (q &lt;= 0) {" line23="            game.showLongText(&quot;ERROR: L'Ajuntament només permet intercanvis positius. No acceptem RTX 5090 ni destrals!&quot;, DialogLayout.Bottom)" line24="            return" line25="        }" line26="" line27="        if (animal &amp;&amp; q % 1 !== 0) {" line28="            game.showLongText(&quot;ERROR: Segons les normes, els animals s'han d'intercanviar sencers i vius. No tallem potes!&quot;, DialogLayout.Bottom)" line29="            return" line30="        }" line31="" line32="        let cost_total = Math.round(taxa * q * 100) / 100" line33="" line34="        // Resposta amb l'equivalent de quilos de llenya (Requisit Enunciat)" line35="        if (info.score() &gt;= cost_total) {" line36="            info.changeScoreBy(-cost_total)" line37="            music.baDing.play()" line38="            game.showLongText(&quot;CANVI FET: Per &quot; + q + &quot; &quot; + nom + &quot; has lliurat &quot; + cost_total + &quot;kg de llenya de pi.&quot;, DialogLayout.Center)" line39="        } else {" line40="            let falta = Math.round((cost_total - info.score()) * 100) / 100" line41="            game.showLongText(&quot;RECURSOS INSUFFICIENTS: Necessites &quot; + cost_total + &quot;kg. Te'n falten &quot; + falta + &quot;kg.&quot;, DialogLayout.Bottom)" line42="        }" line43="    }" line44="}" numlines="45"></mutation><next><block type="typescript_statement" id="F|jhHl`|i2}xY^dD8cEF"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let mercat_app = new MercatRural()" numlines="1" declaredvars="mercat_app"></mutation><next><block type="function_call" id="`^9G9q#C,Johm${3b[)X"><mutation name="inicialitzar_joc" functionid="mN)f|KA,LM2o0J+UqBau"></mutation><comment pinned="false" h="80" w="160">--- 5. ESDEVENIMENTS I LÒGICA ---</comment></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="gameinterval" id="[$^`?^f9_)Zd0i9JgcmO" x="1396" y="20"><comment pinned="false" h="80" w="160">Bosc dinàmic: Regeneració cada 3 segons (2 arbres)</comment><value name="period"><shadow type="timePicker" id="6fqS6ooI#JeV@Z?XLnaY"><field name="ms">3000</field></shadow></value><statement name="HANDLER"><block type="function_call" id="xN`kf/I=*ZGsWP5,~~`9"><mutation name="crear_un_arbre" functionid="|=*865z%/--K{W~2I*/0"></mutation><next><block type="function_call" id="~rwY-vi_Pj5jawIkD75S"><mutation name="crear_un_arbre" functionid="|=*865z%/--K{W~2I*/0"></mutation></block></next></block></statement></block><block type="gameupdate" id="+~rknis%#wo1tiDuf5}}" x="1836" y="20"><statement name="HANDLER"><block type="controls_if" id="]LLFo!GwUb$U+u]BmTj!"><comment pinned="false" h="80" w="160">GUI de proximitat</comment><value name="IF0"><shadow type="logic_boolean" id="zcioB5FrGDwAd.*hyQ@p"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="T-_nQ~0K,y|2?`S.,XF]"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="6uLy@K?J}pX+oo!`),th"><field name="NUM">0</field></shadow><block type="math_js_op" id="N?zn%GHY=vj8J`ac*OtY"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="unary"></mutation><field name="OP">sqrt</field><value name="ARG0"><shadow type="math_number" id="tI!%^EH6B%7~w=E;RFnT"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="3L]t1Y)b)0TUj[P}E-qR"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="$p|VV62*:i222MQP%O$n"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="/MW-3W@n!G-.xL4!wEyR"><field name="OP">POWER</field><value name="A"><shadow type="math_number" id="Gu(~1c9(ms0#dtzo*,7a"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="ui}u=V$A-}-s^^@4~Pa{"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="s9AypCBdg|QevbeGDS%P"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id=")~gGc%Gzb6N0{YAQXj,R"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="!$N*:6Gzbs-br{u(Se1E"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value></block></value><value name="B"><shadow type="math_number" id="PULe#D|fPOO2u*(jE(D-"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="G1-E#6/V^.Z9*Uso=7jY"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="}czlf|l=A1@l^J}1m*i="><field name="VAR" id="LJVExrEnV9,};OV=;lt6">mercader</field></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="JfHBAwR^pr[4PND_4xxA"><field name="NUM">2</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="$V%sa++YCQgkeZ,G:fU;"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="PkU+Eto0TiKQQ~Lt?w3~"><field name="OP">POWER</field><value name="A"><shadow type="math_number" id="X_}0}A{s^ntV%mX1+Jl["><field name="NUM">0</field></shadow><block type="math_arithmetic" id="=aYKkg_3P0c-=V::U+M2"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id=".kT#!mJVBqjU3!x+P,s]"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="DLJD`e./|nSe17O1HO|5"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id="SU6L,:q]E:l[^B!2XakZ"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value></block></value><value name="B"><shadow type="math_number" id="=VVX9po^v?cfJLJ$)k?@"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="Os{SG)an+n$P{Azw2%x;"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id="Tbgz]vy6xIR8dgGVmuDf"><field name="VAR" id="LJVExrEnV9,};OV=;lt6">mercader</field></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="[-*FKwwD%4ZfVnZsJl,x"><field name="NUM">2</field></shadow></value></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="leeTt-qG5iEC86oc%/Vd"><field name="NUM">40</field></shadow></value></block></value><statement name="DO0"><block type="spritesaytext" id="8`^}A7q2/C.Y(MV+XLK;"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="this"><block type="variables_get" id="{mmhAsn|!nYg~W;hE!W?"><field name="VAR" id="LJVExrEnV9,};OV=;lt6">mercader</field></block></value><value name="text"><shadow type="text" id="#k37zrdTIOUI];6dbyGD"><field name="TEXT">A: Mercat</field></shadow></value><value name="timeOnScreen"><shadow type="timePicker" id=":V(KYuJ,z?ea!-5np%f$"><field name="ms">100</field></shadow></value></block></statement><next><block type="pxt_controls_for_of" id="!.x|j`[o;z0(5!EHM$.,"><value name="VAR"><block type="variables_get_reporter" id="M-vsAts,#ZTt6uzAMt*["><mutation duplicateondrag="true"></mutation><field name="VAR" id="pQMyA3d.BAfZ=*F)FP}{">a</field></block></value><value name="LIST"><block type="allOfKind" id="=Zs}|_PRIdd*XrUrG}g."><value name="kind"><shadow type="spritekind" id="8A#%(qkkmpyq)5QsbmFq"><field name="MEMBER">Player</field></shadow><block type="variables_get" id="u;dTws*48bgQWHR/MU{v"><field name="VAR" id="6@?,+^{tmtd!a4j@04jC">KIND_TREE</field></block></value></block></value><statement name="DO"><block type="controls_if" id="(nP[/tRBPnG:$Kf6+Y1v"><value name="IF0"><shadow type="logic_boolean" id="zS|;7I*~kzW5S}Ds)#L$"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Qi~+bR0!Q?olQVBgyA3i"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="eO5)K45]o,uNi4%:4uu9"><field name="NUM">0</field></shadow><block type="math_js_op" id="hTGud+HTfC:;~~ZK?nc#"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="unary"></mutation><field name="OP">sqrt</field><value name="ARG0"><shadow type="math_number" id="bHi{|UHGBQ8*E3OnzoQ,"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="-_+lh$WgJZ7dpJJGB-ud"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="!lBY`Mf2QP+V%w%_1ALv"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Oq7[qU*(gfW2nra#Ox`A"><field name="OP">POWER</field><value name="A"><shadow type="math_number" id="OVDmSJ~C?d/rMX,2~[=I"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="YmpIS45wBrpp(w]iS[Hd"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="lbQzu?UFC;kp]*Xex#AN"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="l99W+#q)cF3$p=_6OI|B"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="K}[t;5qeoYM0Y!jU-[+p"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value></block></value><value name="B"><shadow type="math_number" id="QXwVkD7/m.|E8lA:X?U*"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="nA5;tv%.0Gm1n,Z[sbt0"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="[M|6wX35g/:9X25voq=}"><field name="VAR" id="pQMyA3d.BAfZ=*F)FP}{">a</field></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="j5=]rDfV;e_R{[NL3W09"><field name="NUM">2</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="Uq*+IGgZFk}L}k.GIf%R"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="6(~rj,GID_G=b_]8{r?f"><field name="OP">POWER</field><value name="A"><shadow type="math_number" id="~.Xj{Z0C7:L5-j*-qoY$"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="U1JNhN~Abz]Nalle+`v~"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="a)15k98~2N.PfQRt3nZ}"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="@4HL6iWe)llF9eF7E}%c"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id="82lQ9Q`7**1U%t^S6b__"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value></block></value><value name="B"><shadow type="math_number" id="[,@7~{Qo^i[-A1S~plwQ"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="M5}ebdY_skyRrHHe+c)C"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id="?#?4crM|x{iuuACn6*S`"><field name="VAR" id="pQMyA3d.BAfZ=*F)FP}{">a</field></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="@];dJdkA@yI8Nc0[/tJ1"><field name="NUM">2</field></shadow></value></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="[-9M!1MS4-3pz5XzW2l2"><field name="NUM">30</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="3zhoj@v.#wzC0}!Z8f7$"><field name="VAR" id="RJql0#LkZ32(SS[(d+E%">prop_arbre</field><value name="VALUE"><shadow type="math_number" id="6uLZNA0S_?_7b1~GRx(e"><field name="NUM">0</field></shadow><block type="logic_boolean" id="0ttyO+~m^qoz)sHmza0f"><field name="BOOL">TRUE</field></block></value><next><block type="break_keyword" id="Sru~JK6Q_B24]8r~j?!;"></block></next></block></statement></block></statement><next><block type="controls_if" id="a68ujlKUa]0(bVD@pm^_"><value name="IF0"><shadow type="logic_boolean" id=";7C49FUsZqf-?$CY*b]D"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="Pmm(Fl8@4pyOr/Z^rp^T"><field name="VAR" id="RJql0#LkZ32(SS[(d+E%">prop_arbre</field></block></value><statement name="DO0"><block type="spritesaytext" id="t]5O^p|k)E2?UNDGxwNU"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="this"><block type="variables_get" id="vlIK*NO]tN_Mz,X(vizy"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="text"><shadow type="text" id="@l}Pmru,~d8u!GWf|vkI"><field name="TEXT">B: Talar</field></shadow></value><value name="timeOnScreen"><shadow type="timePicker" id="=LHXxex(`]0NMa%`K$ja"><field name="ms">100</field></shadow></value></block></statement></block></next></block></next></block></statement></block><block type="keyonevent" id="jwvm`_D1U3:e}#1K`gqt" x="3520" y="20"><field name="button">controller.A</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="{vdCe+=x{uHMP#{u5U3b"><value name="IF0"><shadow type="logic_boolean" id="?8LU|qvPIn}0DPjUK/J{"><field name="BOOL">TRUE</field></shadow><block type="spriteoverlapswith" id="zXn2Kfs]xI3I5a51~sRj"><value name="sprite"><block type="variables_get" id=";t*9EZI.}l[(HD33EO-5"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="other"><block type="variables_get" id="Ui6g$?_mCOY4]whUGgBU"><field name="VAR" id="LJVExrEnV9,};OV=;lt6">mercader</field></block></value></block></value><statement name="DO0"><block type="function_call" id="?snLXDgSN*xb{t:#1f/%"><mutation name="obrir_menu_intercanvi" functionid="SDHMVV:1O8v:JpjoT4D7"></mutation></block></statement></block></statement></block><block type="keyonevent" id="RafzryvZPox!ja/%i0w0" x="4120" y="20"><field name="button">controller.B</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="pxt_controls_for_of" id="T/}=B(Vllj00c0r`G~L."><value name="VAR"><block type="variables_get_reporter" id="+aMY1Xinyn~M)J3(^dua"><mutation duplicateondrag="true"></mutation><field name="VAR" id="(Q{]e`I,8SH`2yj#T+(}">arbre2</field></block></value><value name="LIST"><block type="allOfKind" id="J[`uYFxW$i{O;Y$Js1]%"><value name="kind"><shadow type="spritekind" id="r=(]#bsPlLg{f09WKsDc"><field name="MEMBER">Player</field></shadow><block type="variables_get" id="psSxp-yaS*/@^Cv5q8o;"><field name="VAR" id="6@?,+^{tmtd!a4j@04jC">KIND_TREE</field></block></value></block></value><statement name="DO"><block type="controls_if" id="YnEy#kA}B|irP)3j*O@X"><value name="IF0"><shadow type="logic_boolean" id="{nd[ZrXB9L3,BR;tOopO"><field name="BOOL">TRUE</field></shadow><block type="spriteoverlapswith" id="l3|eFglkgEf]I@;===gg"><value name="sprite"><block type="variables_get" id="V6X1r=ofWj$F0ebLC9K`"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="other"><block type="variables_get" id="=Cv}*bOTe[B9633Yz]xg"><field name="VAR" id="(Q{]e`I,8SH`2yj#T+(}">arbre2</field></block></value></block></value><statement name="DO0"><block type="spritesaytext" id="1?,Lb_SV%W.TCsIuZ/pI"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="this"><block type="variables_get" id="a8aCVT~Q3t/7.n$S8e{["><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="text"><shadow type="text" id="hH8f,TrSRvfbZEs8$hZT"><field name="TEXT">Xac!</field></shadow></value><value name="timeOnScreen"><shadow type="timePicker" id="g4PNcl2.@bd6[Cgb)#.2"><field name="ms">200</field></shadow></value><next><block type="device_pause" id="7C-3#wa``2As3$,^_9vv"><value name="pause"><shadow type="timePicker" id="pY1FZHo.cJGA=dEVG4{F"><field name="ms">200</field></shadow></value><next><block type="spritedestroy" id=";.l{CApqW3y0B6i$^hi%"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><field name="effect">effects.disintegrate</field><value name="sprite"><block type="variables_get" id="U-?EXr.0/CmyO}l=6](+"><field name="VAR" id="(Q{]e`I,8SH`2yj#T+(}">arbre2</field></block></value><value name="duration"><shadow type="timePicker" id="*EO$q3b8JfoC{uoJPOfV"><field name="ms">200</field></shadow></value><next><block type="hudChangeScoreBy" id="thmegZglB-Ibk9.4j,QJ"><comment pinned="false" h="80" w="160">Cada arbre tallat dóna 5kg de llenya</comment><value name="value"><shadow type="math_number" id="F^Px#)vvA!WF(c~3Z+6s"><field name="NUM">5</field></shadow></value><next><block type="mixer_play_sound" id="3B0Y*Gv2c`]kZD32brMz"><field name="sound">music.smallCrash</field><data>{"commentRefs":[],"fieldData":{}}</data><next><block type="break_keyword" id="Op{Bi0oqqjucrdo5ODAv"></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block></statement></block><block type="keyonevent" id="Hx7IH!]A,%@GXtlY{C^P" x="20" y="2193"><field name="button">controller.down</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="run_image_animation" id="ewNP*;A[)E}aN5-Ht3r4"><value name="sprite"><block type="variables_get" id="-ZlZWs{~Lv:NgAwCq68J"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="frames"><shadow type="animation_editor" id=".U_xQ!vuM@@.R0fUr6P$"><field name="frames">assets.animation`nena-animation-down`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim1"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="l{YIi0b^;)jz{_nf!ecC"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="/WkB]CEFwi~UsGsLN8VM"><field name="on">false</field></shadow></value></block></statement></block><block type="keyonevent" id="!;i9d9MLhZdgOc|S]EuJ" x="383" y="2193"><field name="button">controller.left</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="run_image_animation" id="@J{BBK.H]Y}JumAU7BG4"><value name="sprite"><block type="variables_get" id="YGL+@0nvGPQYvbn~O/U`"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="frames"><shadow type="animation_editor" id="`^C:}b4Z}pKL%KES{`0z"><field name="frames">assets.animation`nena-animation-left`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim2"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="*/e1HOru4#+ec95-sy.d"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="V#qwKo-%{fD8$6F@%[-q"><field name="on">false</field></shadow></value></block></statement></block><block type="keyonevent" id="x?gFh]j{@cgf[*5.-q^N" x="782" y="2193"><field name="button">controller.up</field><field name="event">ControllerButtonEvent.Pressed</field><comment pinned="false" h="80" w="160">Animacions ( PEP8 / naming convention / Smart Coding )</comment><statement name="HANDLER"><block type="run_image_animation" id="^VhvJEVV?6.ApL4v^8$("><value name="sprite"><block type="variables_get" id="3Vv+a01Cc=Dz9w:rnKgD"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="frames"><shadow type="animation_editor" id="Z-gMHcv2k^#pq{.]ci7i"><field name="frames">assets.animation`nena-animation-up`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim3"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="BJYkU)8VHAXw}v}*8Aex"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="?D(Zt?.Ia`(,B=)A|a(U"><field name="on">false</field></shadow></value></block></statement></block><block type="keyonevent" id="2_+s]@1`wiBiI^XE1`:_" x="1170" y="2193"><field name="button">controller.right</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="run_image_animation" id="k=8VnXZH0uwu!=*1LQGu"><value name="sprite"><block type="variables_get" id="K=%EraQGaG#KLhl88h%@"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="frames"><shadow type="animation_editor" id="u=N==L]~R,E=c2?HG|Y}"><field name="frames">assets.animation`nena-animation-right`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim4"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="!tF-#FrCSgi1_J%jAM6X"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="|6bCjQh6.IEEF:M{(#7c"><field name="on">false</field></shadow></value></block></statement></block><block type="function_definition" id="Wtq)jvyJBXjS5Y]gOAGx" x="1551" y="2193"><mutation name="inicialitzar_joc" functionid="mN)f|KA,LM2o0J+UqBau"></mutation><field name="function_name">inicialitzar_joc</field><comment pinned="false" h="80" w="160">--- 4. FUNCIONS MODULARS (snake_case) ---</comment><statement name="STACK"><block type="set_current_tilemap" id="?.6[,xdewGC^!yuYtX@u"><value name="tilemap"><shadow type="tiles_tilemap_editor" id="ySICDdITya)0W~5X8DnL"><field name="tilemap">tilemap`map`</field><data>{"commentRefs":[],"fieldData":{"tilemap":"map1"}}</data></shadow></value><next><block type="variables_set" id=";UOq?%=147fgJT!nlyQF"><field name="VAR" id="LJVExrEnV9,};OV=;lt6">mercader</field><comment pinned="false" h="80" w="160">NPC Mercader (Representant del Mercat de Trueque)</comment><value name="VALUE"><shadow type="math_number" id="vTesGDH.,tO)P2^%)!PW"><field name="NUM">0</field></shadow><block type="spritescreate" id="kZ3mR4{5qv=#@+8=gyTx"><value name="img"><shadow type="screen_image_picker" id="1(QGz`Vy!~sjj-T1N?jN"><field name="img">assets.image`miImagen2`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image6"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="`dDpac+#`95G+K6*fme^"><field name="MEMBER">Player</field></shadow><block type="variables_get" id="/_aYZK4)}GMce_OC@K;1"><field name="VAR" id="fSEr}J=p+MO$Om7!p64F">KIND_NPC</field></block></value></block></value><next><block type="mapplaceontile" id="zSqTdvT4Cevsi[8+Lf#c"><value name="sprite"><block type="variables_get" id="t[mlk$u#+O$3P1%.1,x["><field name="VAR" id="LJVExrEnV9,};OV=;lt6">mercader</field></block></value><value name="loc"><shadow type="mapgettile" id="lvBn2Th]_IZwJg7g#BV("><value name="col"><shadow type="math_number" id="C-zqEj`J:x-KhIi/ij-:"><field name="NUM">8</field></shadow></value><value name="row"><shadow type="math_number" id="LKBWs1F3}y9XrH0|ouaS"><field name="NUM">7</field></shadow></value></shadow></value><next><block type="variables_set" id=".{eBp6%EJ{KH2jj?U/lC"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field><comment pinned="false" h="80" w="160">Jugador (Net/a de l'avi amb el terreny)</comment><value name="VALUE"><shadow type="math_number" id="5IIx-5o07LDkdO+m0hA`"><field name="NUM">0</field></shadow><block type="spritescreate" id="QEMQ7chIp`ipKW_TZW?~"><value name="img"><shadow type="screen_image_picker" id="L~-VHx,;-keXXh,a(1a."><field name="img">assets.image`nena-front`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image1"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="g:y6*{$NvU7_uou-TWn5"><field name="MEMBER">Player</field></shadow></value></block></value><next><block type="mapplaceontile" id="6O_Hi+Uzd]w~ng8D|IXv"><value name="sprite"><block type="variables_get" id="OY;c/34xFCdi.W{.yfHD"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><value name="loc"><shadow type="mapgettile" id="$G_JhHE~Ik,sC?,)Am.y"><value name="col"><shadow type="math_number" id="*O=LH$G42kt;ptHN[^Jo"><field name="NUM">8</field></shadow></value><value name="row"><shadow type="math_number" id="u~EF6oQK^5qKCZ1Uav*("><field name="NUM">10</field></shadow></value></shadow></value><next><block type="camerafollow" id="f}V0OHkl8zK4,~B].*hc"><value name="sprite"><block type="variables_get" id="An?$NqJJD[-FX0YL_A]p"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><next><block type="game_control_sprite" id="z*wS_T5Gt6MDiayY|!Ct"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="sprite"><block type="variables_get" id="]98J;~_3]*o3YYY71*70"><field name="VAR" id="[@%B/Z0Z1r{7y:C(UBo2">nena</field></block></value><next><block type="hudsetScore" id="X(f/=*@y1R6FuS[eID~5"><comment pinned="false" h="80" w="160">Score representa els Kilograms de llenya acumulats</comment><value name="value"><shadow type="math_number" id="{n5bU;JIRSWIhN9wIo+L"><field name="NUM">0</field></shadow></value><next><block type="function_call" id="+C$XYZc_Ta^T455U/InC"><mutation name="generar_bosc_inicial" functionid="J;az`EXp32}LGurYyQ@b"><arg name="num" id="u2s7ho8lyyne0bnqjukg" type="number"></arg></mutation><value name="u2s7ho8lyyne0bnqjukg"><shadow type="math_number" id="H|lw)uuq+yv|+Iz!CySR"><field name="NUM">8</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="P%gC`K5cIw?!`ct:wJ)." x="2237" y="2193"><mutation name="crear_un_arbre" functionid="|=*865z%/--K{W~2I*/0"></mutation><field name="function_name">crear_un_arbre</field><statement name="STACK"><block type="controls_if" id="()m(K,LOf1+Zh_)%-@XW"><value name="IF0"><shadow type="logic_boolean" id="a(LU{/rl;RP|[t^Bg_pX"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="?bv*$6I#D-4r;Fh-sMji"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="aB2Pb@c.5DW|.vqFY~g["><field name="NUM">0</field></shadow><block type="lists_length" id="l=bdP4uPKvS`-2?~jrc5"><value name="VALUE"><block type="allOfKind" id="*QBRe7sknMD,d5#+W-CK"><value name="kind"><shadow type="spritekind" id=":).SPub0,p~.urE[Yc:R"><field name="MEMBER">Player</field></shadow><block type="variables_get" id="Wc`OeNP-2[`Emh~Oi0aG"><field name="VAR" id="6@?,+^{tmtd!a4j@04jC">KIND_TREE</field></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="y?nr@cFUyz!bon!r:1WQ"><field name="NUM">15</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="gJ,gezk^QC]XAG:i8}|c"><field name="VAR" id="zzq6Nzw,f1TG;_H/^1~Q">arbre</field><value name="VALUE"><shadow type="math_number" id="rt5Fd-:(B:!sxG_A8|oL"><field name="NUM">0</field></shadow><block type="spritescreate" id="rAC#;^^j@U#O^-9R[HVH"><value name="img"><shadow type="screen_image_picker" id="@-^f#JOpnb)jH@JX=+3d"><field name="img">assets.image`miImagen`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image2"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="#Y|RLwN+7=d]%Td2LI7v"><field name="MEMBER">Player</field></shadow><block type="variables_get" id="9PX3K+e5cFTwdI1::]}e"><field name="VAR" id="6@?,+^{tmtd!a4j@04jC">KIND_TREE</field></block></value></block></value><next><block type="variables_set" id="Ky4MBSbMJg=e8CBqVyPS"><field name="VAR" id="3u3%~@]hzLO^K.h/C2.6">col</field><value name="VALUE"><shadow type="math_number" id="=k2FG_H9i8!CDs?@$9+q"><field name="NUM">0</field></shadow><block type="device_random" id="QfIQo:=m1Mz67Gwwh_wi"><value name="min"><shadow type="math_number" id="X8O{.2*X#Tf~0YL+S6FL"><field name="NUM">1</field></shadow></value><value name="limit"><shadow type="math_number" id="=~vjB)HRmg?`:$g-nmeM"><field name="NUM">14</field></shadow></value></block></value><next><block type="variables_set" id="bD,`BUL=+ye^9%C##gz%"><field name="VAR" id="BrD}#d6s!KI.Bb2teY$y">row</field><value name="VALUE"><shadow type="math_number" id="%=r)krLqBpdrs$#QXCTf"><field name="NUM">0</field></shadow><block type="device_random" id="h-0P)b}qJFPrd_.#p+!g"><value name="min"><shadow type="math_number" id="KummGr1d3xg.;0,tcyoq"><field name="NUM">1</field></shadow></value><value name="limit"><shadow type="math_number" id="`=4%t;m4b~ka]|?XxO]m"><field name="NUM">14</field></shadow></value></block></value><next><block type="controls_if" id="D,!T3,?lWgX-|~215?2Q"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="B!Jk8l-1:$e);JR2irus"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="n%DY;0e=(,VUKm!E_S[L"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="u,YZ)%6B;a(Os#--HEK="><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="4}KuSOASdcho2b-[H_~s"><value name="BOOL"><shadow type="logic_boolean" id="QB/boOV4wh3C;`LLrE9#"><field name="BOOL">TRUE</field></shadow><block type="tiles_tile_at_location_is_wall" id="-smO4rCRkzDMf(,!b}P1"><value name="location"><shadow type="mapgettile" id="IcSJx?PJ5S#Mb35W=j$z"></shadow><block type="mapgettile" id="N*FxI2JcSy~rh8MtdV8E"><value name="col"><block type="variables_get" id="RX-ean!Q=5@`U-:{S]N,"><field name="VAR" id="3u3%~@]hzLO^K.h/C2.6">col</field></block></value><value name="row"><block type="variables_get" id="5|R/fN/PVNCUNE.bS7kn"><field name="VAR" id="BrD}#d6s!KI.Bb2teY$y">row</field></block></value></block></value></block></value></block></value><value name="B"><shadow type="logic_boolean" id="-JD)[_8HPDH~n4eYCS7F"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="zsMS4uVII)GgE,CX.^Xv"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="!$!eb*KCrdaf14^^1}5Y"><field name="NUM">0</field></shadow><block type="math_op3" id="+CxOX3*OF#9nP-?Ev)bF"><value name="x"><block type="math_arithmetic" id="2MRKJon;zzaKuSza[|L_"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id=".f{t:,yQ2`8*-R|p%dK="><field name="NUM">0</field></shadow><block type="variables_get" id="%5rP}f9Xr2mAn}]E/,/F"><field name="VAR" id="3u3%~@]hzLO^K.h/C2.6">col</field></block></value><value name="B"><shadow type="math_number" id="6RSrb8.:#|!a+}+.{!2M"><field name="NUM">8</field></shadow></value></block></value></block></value><value name="B"><shadow type="math_number" id="xZ%,63RsfZ0)004t(dSK"><field name="NUM">2</field></shadow></value></block></value></block></value><statement name="DO0"><block type="mapplaceontile" id="Y7oV=L+@/y8wB0rO9[H0"><value name="sprite"><block type="variables_get" id="+SMG_810JA4FGE1^,tM7"><field name="VAR" id="zzq6Nzw,f1TG;_H/^1~Q">arbre</field></block></value><value name="loc"><shadow type="mapgettile" id="P;ChaKt=,^!B+{DolkuH"></shadow><block type="mapgettile" id="C}E0RYOU/~ubvCHBC0$r"><value name="col"><block type="variables_get" id="INnD_$uDwMKw!`Zs-:CG"><field name="VAR" id="3u3%~@]hzLO^K.h/C2.6">col</field></block></value><value name="row"><block type="variables_get" id="t-=)xqTH0Fpiyd7SW`Si"><field name="VAR" id="BrD}#d6s!KI.Bb2teY$y">row</field></block></value></block></value></block></statement><statement name="ELSE"><block type="spritedestroy" id="kVeEAHbM6gt)p~t6^mza"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.spray</field><value name="sprite"><block type="variables_get" id="uAQQcxlM4k+tpJyp%NPG"><field name="VAR" id="zzq6Nzw,f1TG;_H/^1~Q">arbre</field></block></value></block></statement></block></next></block></next></block></next></block></statement></block></statement></block><block type="function_definition" id="^pB/r^)h`Sx31C3k+u@%" x="3680" y="2193"><mutation name="generar_bosc_inicial" functionid="J;az`EXp32}LGurYyQ@b"><arg name="num" id="u2s7ho8lyyne0bnqjukg" type="number"></arg></mutation><field name="function_name">generar_bosc_inicial</field><value name="u2s7ho8lyyne0bnqjukg"><block type="argument_reporter_number" id="G^NO=C23ZuVr2*CNn!c}"><mutation duplicateondrag="true"></mutation><field name="VALUE">num</field></block></value><statement name="STACK"><block type="controls_repeat_ext" id="T:+~#:f[/?v39m*J^Al^"><value name="TIMES"><shadow type="math_whole_number" id="[V[!V54de-A)[;bMB0C-"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="s$YZe9mnGS-J$g]=d$vM"><field name="VALUE">num</field></block></value><statement name="DO"><block type="function_call" id="Q/`5.{:m]m`vkBrh{d/H"><mutation name="crear_un_arbre" functionid="|=*865z%/--K{W~2I*/0"></mutation></block></statement></block></statement></block><block type="function_definition" id="B;3C0Jpv4~?pS}rfT%$Y" x="4098" y="2193"><mutation name="obrir_menu_intercanvi" functionid="SDHMVV:1O8v:JpjoT4D7"></mutation><field name="function_name">obrir_menu_intercanvi</field><comment pinned="false" h="80" w="160">Menú Principal (Bucle fins que se selecciona Sortir - Requisit Enunciat)</comment><statement name="STACK"><block type="device_while" id="[hLp7BGh|d@;cb$elrBL"><value name="COND"><shadow type="logic_boolean" id="z#mq.Res^WD)~*/K$Vm`"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="7`V5^o`i!XOrLa1u^$%B"><value name="BOOL"><shadow type="logic_boolean" id="`,G)f!IOey/b4T7xqt+!"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="UDnVl|b9f*r+Q{l2r=E)"><field name="VAR" id="J{S0]7*=0$W/d,th;yms">sortir</field></block></value></block></value><statement name="DO"><block type="variables_set" id="5Q.5nRQYt|CooqrSJf!F"><field name="VAR" id="2,tBMPz0lqzfd/qPWGi3">tria</field><comment pinned="false" h="80" w="160">GUI per visualitzar el menú (Requisit Enunciat)</comment><value name="VALUE"><shadow type="math_number" id="AanI)711+G)k]Bvl2(iY"><field name="NUM">0</field></shadow><block type="gameaskfornumber" id="Tr(lR#$I{)(*c,@{b$@~"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="message"><shadow type="text" id="OYr_nbTQ,X8rk3gw^biQ"><field name="TEXT">1:Gal 2:Pat 3:Cab 4:Ou 5:Cav 0:Sortir</field></shadow></value><value name="answerLength"><shadow type="math_number_minmax" id="%Ur7a$;?z*df#KFU+Okd"><mutation min="1" max="10" precision="0"></mutation><field name="SLIDER">1</field></shadow></value></block></value><next><block type="controls_if" id="D6Hz:@(0DaelMCil3{]L"><mutation elseif="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="dnUt(M+sS{Z?3~YzWtzN"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="EG3DI6qAkj@%4hj[Ysk9"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="s,x`Sq}#)_bCNIe0Jr{4"><field name="NUM">0</field></shadow><block type="variables_get" id="z2H1Zt];3DM~NwbtQR5N"><field name="VAR" id="2,tBMPz0lqzfd/qPWGi3">tria</field></block></value><value name="B"><shadow type="math_number" id="CF%R7-cB;]hK-kfK!+GT"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="az6b6QeEY}ih+UWqXPi-"><field name="VAR" id="J{S0]7*=0$W/d,th;yms">sortir</field><value name="VALUE"><shadow type="math_number" id="5wZ1%iM]IlNxAruAd-@,"><field name="NUM">0</field></shadow><block type="logic_boolean" id="12rPd:@wzGo]EfBpO*jL"><field name="BOOL">TRUE</field></block></value><next><block type="game_show_long_text" id="Gjt*yM|.p+B@nWLxa}VM"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="bPTP*h/Q//824gz*y|{["><field name="TEXT">Gràcies per mantenir el bosc net! Adeu!</field></shadow></value></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="lez/-!zXT!24IQ2RON?j"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="{PkHNEN|X*w+I!}[#)Td"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="HNd-/2%s_Hn--)7tq/Xx"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="13`D]MSrinUscN.}7lbH"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="KFRLaU$vjMXKaI+$-`:4"><field name="NUM">0</field></shadow><block type="variables_get" id="@+YFZ`q7Ig:]-g/{g~t3"><field name="VAR" id="2,tBMPz0lqzfd/qPWGi3">tria</field></block></value><value name="B"><shadow type="math_number" id="i_*;GjLLrHGkO(i=#wLs"><field name="NUM">1</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="q7WnqO5J|_3gS-;E(|5G"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Ra%6a%aKypC5N1.#v3tS"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="StX-Ut/h%?(NrF}c{{y%"><field name="NUM">0</field></shadow><block type="variables_get" id="a$;#JOAS.e0QgXLCA64N"><field name="VAR" id="2,tBMPz0lqzfd/qPWGi3">tria</field></block></value><value name="B"><shadow type="math_number" id="?wtL=I5:=z68Y[ItAXL3"><field name="NUM">5</field></shadow></value></block></value></block></value><statement name="DO1"><block type="variables_set" id="1gY@=`@{w{E*5o6r|{%Y"><field name="VAR" id="`vqXc.GX$QP3}eU:3yuW">quantitat</field><value name="VALUE"><shadow type="math_number" id="Tm#(80yaj^tc@Hho-uI/"><field name="NUM">0</field></shadow><block type="gameaskfornumber" id="_!LshkJp~x-$_1x7}5+}"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="message"><shadow type="text" id="A[AzmCtS27E+fg+Vr4z^"><field name="TEXT">Quantes unitats/kg en vols?</field></shadow></value><value name="answerLength"><shadow type="math_number_minmax" id="R8+gf_eVMc8*QrQ*$wGa"><mutation min="1" max="10" precision="0"></mutation><field name="SLIDER">3</field></shadow></value></block></value><next><block type="typescript_statement" id="jg?eU|L0;pB@(~;}g4I]"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="mercat_app.processar_compra(tria - 1, quantitat)" numlines="1"></mutation></block></next></block></statement></block></next></block></statement></block></statement></block></xml>